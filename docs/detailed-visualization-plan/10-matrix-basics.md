# 矩阵快速幂算法基础组件动画

## 矩阵基础组件动画

### 矩阵显示组件动画
- **矩阵容器设计**：
  - 基本形状：圆角矩形容器，圆角8px
  - 外边框：3px solid #1565C0
  - 背景颜色：浅蓝色(#E3F2FD)
  - 阴影效果：轻微阴影(box-shadow: 0 3px 6px rgba(0,0,0,0.1))
  - 大小：默认2x2矩阵，每个单元格宽高均为50px
  - 总尺寸：2x2矩阵约为110px × 110px（含边框和间距）
  - 响应式：根据屏幕尺寸自动调整，最小单元格尺寸为30px × 30px

- **矩阵括号设计**：
  - 左括号：
    * 形状：左侧凹进的|[形状
    * 位置：矩阵左侧，高度比矩阵高10px
    * 宽度：5px
    * 颜色：深蓝色(#0D47A1)
    * CSS实现：使用border-left和伪元素创建上下横线
  
  - 右括号：
    * 形状：右侧凹进的]|形状
    * 位置：矩阵右侧，高度同左括号
    * 样式：与左括号对称
    * 实现：类似左括号，使用border-right和伪元素

- **矩阵创建动画**：
  - 出现方式：从中心向外扩展(transform: scale(0) → scale(1))
  - 持续时间：400ms
  - 缓动函数：cubic-bezier(0.175, 0.885, 0.32, 1.275)（弹性缓动）
  - 初始透明度：0%到100%平滑过渡
  - 顺序：先显示外框，再显示内部网格和数值
  - 括号动画：括号从上下向中间"生长"，与矩阵同步完成

- **矩阵变换动画**：
  - 尺寸变化：
    * 效果：矩阵从一个尺寸平滑变化为另一个尺寸
    * 时长：500ms
    * 缓动：ease-in-out
    * 处理：同时调整单元格尺寸和总容器大小
    * 约束：保持单元格最小尺寸，必要时启用滚动
  
  - 旋转效果：
    * 类型：沿Y轴3D旋转(rotateY)
    * 用途：用于矩阵转置或方向切换
    * 角度：0° → 90° → 180°，显示背面时内容翻转
    * 时长：600ms
    * 透视：使用perspective(800px)增强3D效果

### 矩阵单元格动画
- **单元格基本设计**：
  - 边框：1px dashed #90CAF9
  - 内边距：5px
  - 背景：略微深于矩阵背景的颜色(#BBDEFB)
  - 文字：居中，Roboto Mono，16px，颜色#1565C0，加粗
  - 交互状态：添加悬停效果，光标变为指针(适用于交互式学习模式)
  - 尺寸计算：自动根据矩阵容器大小和单元格数量计算

- **特殊值样式**：
  - 值为0：
    * 颜色：较浅的蓝色(#64B5F6)
    * 透明度：70%
    * 字体：正常粗细（非加粗）
    * 视觉冲击：较低，表示不太重要的元素
  
  - 值为1（单位矩阵）：
    * 颜色：深蓝色(#0D47A1)
    * 字体：加粗
    * 背景：略带高亮效果
    * 边框：实线而非虚线
    * 视觉冲击：较高，表示单位矩阵中的关键元素

- **值更新动画**：
  - 旧值淡出：
    * 透明度：100% → 0%
    * 时长：200ms
    * 缩放：轻微缩小(scale: 1 → 0.8)
    * 缓动：ease-in
  
  - 新值淡入：
    * 透明度：0% → 100%
    * 时长：200ms
    * 缩放：轻微放大(scale: 0.8 → 1.1 → 1)
    * 缓动：cubic-bezier(0.175, 0.885, 0.32, 1.275)
  
  - 背景过渡：
    * 颜色变化：#4FC3F7 → #BBDEFB
    * 时长：300ms
    * 效果：短暂的高亮，然后恢复正常
    * 过渡：平滑的颜色过渡

- **计算过程可视化**：
  - 数值变化动画：
    * 效果：数字从旧值平滑过渡到新值
    * 实现：JS控制的数值递增/递减动画
    * 速度：基于差值大小动态调整，通常200-500ms完成
    * 精度：整数直接过渡，小数保留至相应精度
  
  - 计算痕迹：
    * 效果：先前值的淡色"残影"短暂保留
    * 透明度：30%
    * 位置：稍微偏移，显示在新值下方或上方
    * 持续时间：300ms后完全消失

- **高亮和选中效果**：
  - 当前计算单元格：
    * 背景色：高亮蓝色(#4FC3F7)
    * 边框：2px solid #2196F3
    * 阴影：轻微发光效果(box-shadow: 0 0 5px #29B6F6)
    * 动画：短暂的脉动效果(scale: 1 ↔ 1.05)
  
  - 行/列高亮：
    * 用途：乘法操作时高亮对应行列
    * 颜色：浅蓝色背景(#E1F5FE)
    * 强度：比单元格高亮弱，但明显区分于普通单元格
    * 动画：平滑淡入淡出，持续300ms

### 矩阵标签与说明动画
- **矩阵名称标签**：
  - 位置：左上角，矩阵外部，偏移(-10px, -10px)
  - 样式：圆形或方形标签，深蓝色背景(#0D47A1)，白色文字
  - 字体：Roboto，14px，粗体
  - 内容：单个字母（如"M"、"A"）或短名称
  - 动画：与矩阵同步出现，轻微的弹入动画
  - 悬停效果：显示完整矩阵名称的提示框

- **幂次标记动画**：
  - 位置：右上角，以上标形式
  - 样式：字体大小12px，颜色与矩阵名称一致
  - 内容：如M^2、M^4、M^8等
  - 出现动画：从透明到不透明，与幂次计算同步
  - 更新效果：数值变更时有翻转或滑动更新动画
  - 大幂次：当幂次较大时，字体自动缩小以适应

- **矩阵类型标记**：
  - 单位矩阵标记：
    * 内容："I"（单位矩阵符号）
    * 位置：右下角，小标签
    * 背景：特殊颜色区分(如金色#FFC107)
    * 出现方式：检测到单位矩阵时自动添加
  
  - 零矩阵标记：
    * 内容："0"（零矩阵符号）
    * 位置：同上
    * 背景：灰色(#9E9E9E)
    * 添加条件：所有元素为0时显示
  
  - 特征矩阵标记：
    * 内容："F"（斐波那契矩阵）
    * 位置：同上
    * 背景：绿色(#4CAF50)
    * 添加条件：检测到斐波那契特征矩阵[[1,1],[1,0]]时

- **维度标记动画**：
  - 位置：右下角，矩阵外部
  - 样式：浅色背景，灰色文字(#757575)，字体大小10px
  - 内容：如"2×2"，标明矩阵维度
  - 显示逻辑：矩阵维度非标准时显示（非2x2时）
  - 更新动画：矩阵维度变化时，标记平滑更新
  - 视觉重要性：设计为不显眼但必要的信息

- **矩阵描述动画**：
  - 位置：矩阵下方，居中
  - 样式：短文本，Roboto 14px，颜色#424242
  - 内容：简短描述，如"转移矩阵"、"结果矩阵"等
  - 出现：与矩阵同步淡入，稍有延迟(100ms)
  - 更新：矩阵角色变化时平滑更新
  - 框架：可选添加轻微边框或背景，增强可读性

## 二进制分解组件动画

### 二进制表示器动画
- **整体容器设计**：
  - 形状：圆角矩形容器，圆角5px
  - 背景：浅灰色(#F5F5F5)
  - 边框：1px solid #BDBDBD
  - 内边距：10px
  - 标题："二进制表示："，位于顶部，字体14px
  - 位置：画布右侧或底部区域
  - 出现动画：从右侧滑入，持续400ms

- **位格设计**：
  - 形状：方形格子，高宽30px
  - 排列：水平排列，从右到左（最低位在最右侧）
  - 间距：位与位之间间隔5px
  - 边框：1px solid #BDBDBD
  - 圆角：3px
  - 阴影：轻微阴影(2px模糊，#00000033)
  - 动态创建：根据n值自动创建足够位数（最少4位）

- **位值显示动画**：
  - 0值样式：
    * 背景：灰色(#E0E0E0)
    * 文字："0"，居中，颜色#757575
    * 视觉设计：表现为"未激活"状态
  
  - 1值样式：
    * 背景：亮蓝色(#2196F3)
    * 文字："1"，居中，颜色白色
    * 发光效果：轻微的蓝色光晕
    * 视觉设计：表现为"激活"状态
  
  - 切换动画：
    * 效果：0和1值之间的翻转切换
    * 实现：使用rotateX(180deg)创建翻转效果
    * 时长：300ms
    * 缓动：cubic-bezier(0.175, 0.885, 0.32, 1.275)
    * 背景色：同时平滑过渡颜色变化

- **位值标签动画**：
  - 位置：每个位格下方5px处
  - 内容：显示对应的十进制值（1,2,4,8,16...）
  - 字体：Roboto Mono，10px，颜色#757575
  - 出现方式：与位格同步淡入
  - 强调：当位值为1时，对应标签颜色加深
  - 大值处理：大位值使用简化表示（如"2^10"而不是"1024"）

- **位格创建顺序动画**：
  - 初始显示：显示灰色空位格（全0状态）
  - 创建顺序：从右到左依次出现
  - 出现动画：每个位格从下方滑入，带轻微弹跳效果
  - 时间间隔：相邻位格出现间隔50ms
  - 填充动画：位值确定后的翻转动画
  - 完成效果：所有位格填充完毕后短暂的整体高亮

### 十进制转二进制动画
- **初始状态设计**：
  - 十进制数显示：
    * 位置：二进制表示器上方或左侧
    * 样式：大号数字，Roboto Mono，24px，颜色#212121
    * 标签："n = "，位于数字前方
    * 容器：圆角矩形，浅色背景，轻微阴影
  
  - 空二进制位格：
    * 状态：所有位格显示为0（灰色）
    * 排列：准备好足够的位数
    * 提示：添加"转换中..."文字提示
    * 闪烁：最右侧位格轻微闪烁，表示准备开始

- **除2过程动画**：
  - 计算面板设计：
    * 位置：二进制表示器上方
    * 布局：类似除法算式的布局
    * 组件：被除数、除数、商、余数清晰标记
    * 样式：类似纸上计算的视觉设计
  
  - 单步除法动画：
    1. **初始值显示**：
       - 显示当前n值作为被除数
       - 显示2作为除数
       - 除法符号闪烁，提示即将开始计算
    
    2. **除法计算**：
       - 商的计算：n ÷ 2 = 商
       - 余数的计算：n % 2 = 余数
       - 数字变化：使用计数动画展示计算过程
       - 结果高亮：计算完成后结果短暂高亮
    
    3. **余数填充**：
       - 目标：当前最右侧空位格
       - 效果：余数值(0或1)从计算区"飞入"到位格
       - 路径：使用弧形路径，带有跟踪尾迹
       - 填充动画：位格翻转显示对应值
       - 完成标记：已填充的位添加小对勾或高亮框
    
    4. **更新n值**：
       - 效果：商成为新的n值
       - 动画：数字更新动画，旧值淡出，新值淡入
       - 位置：新n值移到被除数位置
       - 过渡：短暂停顿后开始下一轮计算
  
  - 循环控制：
    * 继续条件：当n>0时继续循环
    * 结束标志：n=0时停止计算
    * 速度控制：初始较慢，后续步骤可加快
    * 并行优化：当n很大时，可以多步同时执行，减少等待

- **完整转换流程动画**：
  - 时序安排：
    * 每步除法：约500-800ms（动态调整）
    * 余数填充：200ms
    * 步骤间隔：200ms（可根据算法复杂度调整）
    * 总时长：限制在3-5秒内，避免过长
  
  - 加速策略：
    * 前几步：完整详细展示
    * 中间步骤：可选择性加速
    * 最后几步：恢复正常速度
    * 复杂情况：提供"减速"和"跳过"控制选项
  
  - 完成效果：
    * 全部位填充完毕后的整体动画
    * 最终二进制结果短暂放大强调
    * 添加完成标志（如对勾图标）
    * 结果标注："n = X的二进制表示为Y₂"

### 二进制拆分视图动画
- **拆分展示容器**：
  - 位置：二进制表示器下方
  - 标题："二进制拆分:"
  - 背景：白色，轻微阴影
  - 边框：细边框，圆角5px
  - 内边距：12px
  - 出现方式：在二进制转换完成后平滑滑入

- **数值拆分动画**：
  - 初始等式：
    * 内容：如"13 = ?"
    * 字体：Roboto Mono，18px
    * 等号闪烁，表示即将填充
  
  - 拆分过程：
    1. **最高位添加**：
       - 识别最高位1的位置
       - 对应十进制值飞入等号右侧
       - 如"13 = 8 + ?"
       - 该位在二进制表示器中高亮
    
    2. **次高位添加**：
       - 延迟200ms后添加次高位
       - 值使用"+"号连接
       - 如"13 = 8 + 4 + ?"
       - 对应位同样高亮
    
    3. **依次添加所有1位**：
       - 按从高到低顺序添加所有值
       - 每步添加动画保持一致
       - 最终如"13 = 8 + 4 + 1"
       - 完成后等式整体高亮确认

- **位值颜色编码**：
  - 颜色方案：
    * 2^0(1)：蓝色(#2196F3)
    * 2^1(2)：绿色(#4CAF50)
    * 2^2(4)：黄色(#FFC107)
    * 2^3(8)：紫色(#9C27B0)
    * 更高位：循环使用这些颜色或颜色渐变
  
  - 颜色应用：
    * 二进制表示器中对应位使用相同颜色
    * 拆分等式中的值使用相同颜色
    * 颜色饱和度表示位的重要性
    * 确保颜色对比度足够，适合色盲用户

- **幂次映射动画**：
  - 矩阵幂关联：
    * 从每个值连线到对应的矩阵幂
    * 如1→M^1，2→M^2，4→M^4，8→M^8
    * 连线样式：虚线，使用对应颜色
    * 连线动画：从值延伸到矩阵，300ms
  
  - 视觉提示：
    * 每个1位旁添加"需要计算"标记
    * 0位旁添加"跳过"标记
    * 矩阵幂次与二进制位的对应关系图示
    * 动态更新：随n值变化实时更新映射

- **交互功能动画**（适用于交互式界面）：
  - 位值点击：
    * 效果：点击位值切换0/1状态
    * 动画：翻转切换，所有计算实时更新
    * 反馈：切换时有触觉或视觉反馈
    * 拆分同步：二进制变化时拆分视图同步更新
  
  - 数值滑块：
    * 功能：调整n值，观察二进制变化
    * 位置：顶部或左侧
    * 实时更新：拖动时二进制表示实时更新
    * 显示效果：当前值醒目显示

## 矩阵乘法动画组件

### 乘法操作视图动画
- **布局设计**：
  - 排列方式：A × B → C的横向排列
  - 间距：矩阵间距30px
  - 运算符：乘号使用"×"符号，箭头使用"→"符号
  - 对齐：垂直居中对齐所有元素
  - 自适应：根据屏幕宽度自动调整布局，必要时换行
  - 初始位置：矩阵A和B可能从左右两侧滑入

- **操作符样式**：
  - 乘号：
    * 字体：Times New Roman（提供最佳乘号显示）
    * 大小：24px
    * 颜色：#1565C0
    * 垂直对齐：与矩阵中心对齐
    * 动画：出现时有轻微的放大效果
  
  - 箭头：
    * 类型：右箭头"→"或双箭头"⇒"
    * 大小：24px
    * 颜色：同乘号
    * 动画：从左向右"生长"，指示计算方向
    * 脉动：计算过程中可有轻微脉动效果

- **矩阵放置动画**：
  1. **初始放置**：
     - 矩阵A滑入：从左侧滑入到位
     - 矩阵B滑入：从右侧滑入到位
     - 时长：每个矩阵500ms
     - 缓动：ease-out
     - 时序：先A后B，或同时出现
  
  2. **乘号出现**：
     - 时机：两个矩阵就位后
     - 效果：淡入显示，同时轻微放大
     - 时长：200ms
     - 缓动：ease

  3. **箭头生成**：
     - 时机：乘号出现后
     - 效果：箭头从左向右延伸
     - 时长：300ms
     - 动画：使用宽度从0到100%的过渡

  4. **结果位置准备**：
     - 效果：轻微的空间调整，为结果矩阵C预留位置
     - 目标位置：箭头右侧
     - 过渡：所有元素位置平滑调整
     - 时长：300ms

- **结果生成动画**：
  - 矩阵C出现：
    * 时机：在计算完成后
    * 效果：从模糊轮廓逐渐清晰化
    * 时长：400ms
    * 背景：初始为浅色，逐渐加深
    * 内容：元素从空白到最终值逐步填充
  
  - 完成确认：
    * 结果矩阵短暂高亮
    * 整个表达式(A×B→C)添加完成标记
    * 可能有短暂的"计算完成"提示
    * 准备转入下一个计算步骤

- **大型矩阵处理**：
  - 缩放策略：
    * 当矩阵超过3×3时自动缩小单元格
    * 保持最小可读性的单元格大小
    * 可提供"放大查看"功能
    * 大型矩阵可显示省略号，点击展开
  
  - 滚动处理：
    * 超出显示范围时添加滚动条
    * 使用水平滚动条查看完整表达式
    * 关键部分（如正在计算的元素）总是可见
    * 自动滚动到当前操作位置

### 单元格计算动画
- **计算路径可视化**：
  - 行列高亮：
    * 效果：同时高亮A的当前行和B的当前列
    * 颜色：浅蓝色背景(#BBDEFB)
    * 动画：平滑淡入(200ms)，保持高亮直到计算完成
    * 边界：高亮区域有细微的发光边缘
  
  - 当前结果元素高亮：
    * 位置：结果矩阵C中当前计算的元素
    * 效果：使用更明亮的蓝色(#4FC3F7)高亮
    * 边框：细微闪烁或脉动边框
    * 标记：可添加"正在计算"提示

- **元素计算动画**：
  - 计算准备：
    * 对应行列元素轻微抖动或闪烁
    * 元素值短暂放大
    * 添加元素位置标识(如a₁₁,b₁₁等)
    * 计算公式框出现在结果元素上方
  
  - 单元计算步骤：
    1. **乘积项生成**：
       - 视觉提示：A行第i个元素和B列第i个元素同时高亮
       - 乘积动画：显示"aᵢⱼ × bᵢⱼ = cᵢⱼ"
       - 计算效果：乘积结果短暂显示
       - 时长：每个乘积项300ms
       - 转换：计算完成后乘积项移向累加区
    
    2. **累积求和**：
       - 位置：结果元素旁边或上方的"累加器"
       - 初始值：0或第一个乘积项
       - 添加动画：每个新乘积项滑入并添加到当前和
       - 数值更新：使用计数动画展示值的增长
       - 公式更新：同步更新显示的计算公式
    
    3. **最终结果填入**：
       - 动作：累积和移动到结果矩阵对应位置
       - 效果：结果元素从空白或占位符变为最终值
       - 填充动画：数字从0增长到最终值
       - 完成标记：填充完成后的短暂高亮和确认标记

- **多元素并行计算**（适用于性能优化）：
  - 视觉分离：
    * 将不同元素的计算路径颜色编码
    * 使用透明度区分主次计算焦点
    * 主焦点元素使用完整动画，次要元素简化动画
    * 完成标记依次出现，表示计算顺序
  
  - 速度调整：
    * 首个元素：完整速度展示详细计算
    * 中间元素：适当加速，减少等待
    * 最后元素：可能恢复正常速度
    * 用户控制：提供速度调节选项

- **计算公式同步显示**：
  - 公式面板：
    * 位置：结果矩阵上方或右侧
    * 样式：浅色背景，代数公式格式
    * 滚动：长公式可水平滚动查看
    * 更新：实时跟随计算步骤更新
  
  - 公式构建动画：
    * 初始：c₁₁ = ?
    * 增量添加：c₁₁ = a₁₁×b₁₁ + ?
    * 最终形式：c₁₁ = a₁₁×b₁₁ + a₁₂×b₂₁ + ...
    * 高亮：当前计算项高亮显示
    * 完成：最终结果替换表达式右侧
  
  - 代数与数值切换：
    * 代数形式：使用矩阵元素符号(aᵢⱼ)
    * 数值形式：使用实际数值
    * 切换控制：提供形式切换按钮
    * 混合模式：同时显示符号和数值

### 乘法路径指示动画
- **路径线绘制动画**：
  - 线条生成：
    * 类型：从A矩阵的行元素到B矩阵的列元素的连接线
    * 样式：虚线(2px dashed)，颜色与当前操作关联
    * 动画：线条从起点"生长"到终点，持续300ms
    * 时序：多条线可依次或同时生成
  
  - 线条布局：
    * 路径形状：弯曲的贝塞尔曲线，避免直线交叉
    * 控制点：设置在两矩阵之间，确保平滑曲线
    * 多线处理：多条线路轻微错开，避免重叠
    * 透视感：使用阴影和透明度创造空间层次

- **数据流动画**：
  - 粒子设计：
    * 形状：小圆点，直径3-5px
    * 颜色：与连接线相同，但不透明度更高
    * 数量：每条路径3-5个粒子
    * 光晕：轻微的发光效果
  
  - 流动效果：
    * 运动：粒子沿路径从A矩阵流向B矩阵
    * 速度：每秒移动路径长度的50%
    * 间距：粒子之间保持等距
    * 循环：到达终点后从起点重新开始
    * 尾迹：移动中留下短暂的淡色尾迹
  
  - 流动控制：
    * 开始时机：路径线完成绘制后立即开始
    * 结束条件：当前计算完成后粒子淡出
    * 流速变化：可根据计算复杂度动态调整
    * 暂停/恢复：与全局动画控制同步

- **交叉点处理**：
  - 空间区分：
    * 使用z-index创造路径交叉的空间错落感
    * 靠前路径较亮，靠后路径较暗
    * 交叉点可添加微小间隙或过渡效果
    * 确保视觉清晰，避免混淆
  
  - 交叉动画：
    * 当粒子通过交叉点时的特殊效果
    * 可能有轻微的缩放或闪烁
    * 交叉时粒子短暂减速然后加速
    * 保持路径的视觉连续性

- **结果映射动画**：
  - 乘积结果指示：
    * 两个值相乘时，对应位置同时高亮
    * 乘积结果短暂显示在路径中间
    * 使用小型"×"符号连接两个值
    * 乘积使用不同颜色区分
  
  - 累积效果：
    * 乘积结果沿路径流向结果矩阵
    * 到达结果位置时有"合并"动画
    * 多个乘积汇聚成单一结果值
    * 最终结果填入时有确认动画
  
  - 完成指示：
    * 所有路径完成计算后的视觉反馈
    * 路径线可能变为实线表示计算完成
    * 添加微小的"完成"标记
    * 准备转入下一个元素计算 