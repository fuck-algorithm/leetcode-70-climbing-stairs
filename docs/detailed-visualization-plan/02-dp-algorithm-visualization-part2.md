# 动态规划算法可视化详细计划 (第二部分)

## 2. 动态规划算法步骤详细实现 (续)

### 步骤4：基本情况设置
- **起点设置**（时间: 28-30秒）
  - 视觉回顾：再次高亮第0阶，显示"dp[0] = 1"
  - 文字说明："我们已经设置了起点(第0阶)的方法数为1，这是我们的基础情况"
  - 视觉效果：第0阶台阶完全变为计算完成状态（绿色，透明度100%）
  - 代码高亮：右侧代码框中的"dp[0] = 1"行高亮显示
  - 小人指示：小人站在第0阶，做确认手势
  
- **第1阶设置**（时间: 30-34秒）
  - 聚焦转移：镜头平滑移动到第1阶
  - 问题提出："要到达第1阶，有几种方法？"
  - 路径分析："我们只能从第0阶爬1阶到达第1阶，没有其他路径"
  - 箭头出现：从第0阶到第1阶绘制蓝色箭头（爬1阶）
  - 公式应用："dp[1] = dp[0] = 1"
  - 数值更新：第1阶方法数从"?"变为"1"，使用数值递增动画
  - 状态更新：第1阶台阶变为计算完成状态（绿色）
  - 小人演示：小人从第0阶爬到第1阶，表示唯一的路径

- **基础状态确认**（时间: 34-36秒）
  - 同时高亮：第0阶和第1阶一起高亮
  - 文字总结："这两个值是我们递推计算的起点"
  - 公式显示：同时显示"dp[0]=1, dp[1]=1"
  - 递推准备："有了这两个基础值，我们可以计算任意阶的方法数"
  - 过渡效果：屏幕轻微缩放，准备展示后续计算

### 步骤5：递推计算过程
- **第2阶计算详细展示**（时间: 36-42秒）
  - 聚焦转移：镜头平滑移动到第2阶
  - 问题提出："要到达第2阶，有几种方法？"
  - 依赖分析："我们可以从第0阶爬2阶或从第1阶爬1阶到达"
  - 箭头出现：
    * 从第0阶到第2阶绘制橙色箭头（爬2阶）
    * 从第1阶到第2阶绘制蓝色箭头（爬1阶）
  - 贡献值标注：
    * 橙色箭头上标注"dp[0]=1"（从第0阶爬2阶）
    * 蓝色箭头上标注"dp[1]=1"（从第1阶爬1阶）
  - 公式应用："dp[2] = dp[1] + dp[0] = 1 + 1 = 2"
  - 计算过程：
    * 先显示"dp[2] = ?"
    * 再显示"dp[2] = dp[1] + dp[0]"
    * 再显示"dp[2] = 1 + 1"
    * 最后显示"dp[2] = 2"
  - 数值动画：第2阶方法数先闪烁问号，然后从"?"变为"2"，使用数值递增动画
  - 状态更新：第2阶台阶变为计算完成状态（绿色）
  - 数据流动画：从第0阶和第1阶沿着箭头向第2阶流动的粒子动画
  - 路径解释："有2种方法到达第2阶：直接从第0阶爬2阶，或者先到第1阶再爬1阶"
  - 视觉总结：第2阶的计数器短暂放大强调最终结果"2"

- **第3阶计算详细展示**（时间: 42-48秒）
  - 聚焦转移：镜头平滑移动到第3阶
  - 依赖高亮：第1阶和第2阶同时高亮，表示它们是计算第3阶所需的依赖
  - 箭头出现：
    * 从第1阶到第3阶绘制橙色箭头（爬2阶）
    * 从第2阶到第3阶绘制蓝色箭头（爬1阶）
  - 贡献值标注：
    * 橙色箭头上标注"dp[1]=1"（从第1阶爬2阶）
    * 蓝色箭头上标注"dp[2]=2"（从第2阶爬1阶）
  - 公式应用："dp[3] = dp[2] + dp[1] = 2 + 1 = 3"
  - 计算过程动画：同上，逐步从"dp[3] = ?"到"dp[3] = 3"
  - 数值更新：第3阶方法数从"?"变为"3"
  - 状态更新：第3阶台阶变为计算完成状态（绿色）
  - 数据流动画：数据从第1阶和第2阶流向第3阶
  - 路径解释："有3种方法到达第3阶：从第1阶爬2阶(1种)或从第2阶爬1阶(2种)"
  - 路径展开："具体为：0→1→3、0→2→3、0→1→2→3三种路径"（可选小字展示）

- **第4阶计算过程**（时间: 48-54秒）
  - 类似上述过程，但更紧凑
  - 聚焦转移：镜头移动到第4阶
  - 依赖高亮：第2阶和第3阶高亮
  - 箭头和计算过程展示
  - 结果计算："dp[4] = dp[3] + dp[2] = 3 + 2 = 5"
  - 路径简要说明："有5种不同路径到达第4阶"
  - 状态更新：第4阶变为计算完成状态

- **第5阶及后续计算**（时间: 54-60秒，根据n值可能延长）
  - 对于n值较小(n≤10)的情况：
    * 继续详细展示每一步计算，但每步时长缩短为4-5秒
    * 保持相同的动画模式，但节奏加快
    * 始终显示当前计算表达式和结果
  
  - 对于n值较大(n>10)的情况：
    * 详细展示到第5阶，然后进入加速模式
    * 加速模式：多个台阶的计算快速连续展示，每阶约1-2秒
    * 关键节点（如斐波那契数列特征值：8,13,21等）减速并略微强调
    * 最后n-2、n-1、n三个台阶恢复正常速度详细展示

  - 视觉指引：
    * 屏幕下方添加进度条，显示当前计算位置
    * 添加"减速"按钮，允许用户减慢或暂停动画
    * 大n值时，提供"跳到结果"按钮

### 步骤6：模式识别
- **斐波那契关系发现**（时间: 取决于n，计算完成后4秒）
  - 文字说明："你注意到了吗？计算结果形成了斐波那契数列: 1,1,2,3,5,8,13..."
  - 视觉效果：台阶上的数字依次闪烁，形成一个明显的序列
  - 数列并排：在屏幕右侧显示已计算的结果序列，标注为斐波那契数列
  - 数学标记：为每个方法数添加斐波那契标记，如F₀, F₁, F₂...
  - 公式显示：F(n) = F(n-1) + F(n-2)，与我们的递推公式一致

- **规律总结**（时间: 4秒）
  - 文字说明："爬楼梯问题的解实际上是斐波那契数列的第(n+1)项"
  - 数学公式："dp[n] = Fib(n+1)"（斐波那契数列从F₀=0, F₁=1开始计算时）
  - 或："dp[n] = Fib(n+2)"（斐波那契数列从F₁=1, F₂=1开始计算时）
  - 视觉映射：将楼梯问题和斐波那契序列的对应关系用连线展示
  - 补充说明：解释斐波那契数列在自然界和数学中的普遍存在

### 步骤7：结果展示
- **最终结果强调**（时间: 4秒）
  - 视觉聚焦：镜头平滑移动到第n阶，该台阶放大并高亮
  - 结果框：在屏幕中央展示大字号结果："到达第n阶的方法数: X"
  - 文字总结："总共有X种不同的方法爬到第n阶"
  - 成功动画：
    * 星星闪烁效果
    * 彩色粒子从底部向上喷发
    * 成功音效（如果启用）
  - 小人动画：小人到达顶部做庆祝动作（举手、跳跃等）

- **路径示例展示**（时间: 6秒，可选）
  - 路径列表：如果n较小(≤5)，显示所有可能路径的列表
  - 路径图示：
    * 使用简化的楼梯图，显示几条典型路径
    * 不同颜色区分不同路径
    * 动画展示几个代表性爬法
  - 统计信息：显示爬1阶和爬2阶的总次数分布
  - 精简说明：n值较大时，只展示几条典型路径，并标注"等X种路径"

### 步骤8：算法优化
- **空间优化解释**（时间: 5秒）
  - 文字说明："我们注意到计算dp[i]只依赖dp[i-1]和dp[i-2]两个值"
  - 内存比较：显示两种方案的内存使用对比
    * 原始方案：存储整个dp数组，使用O(n)空间
    * 优化方案：只保留三个变量，使用O(1)空间
  - 变量动画：展示三个变量如何交替更新的动画
  - 代码优化：展示优化后的代码片段
  ```
  a = 1  // dp[0]
  b = 1  // dp[1]
  对于i从2到n:
      c = a + b
      a = b
      b = c
  返回b  // dp[n]
  ```

- **滚动变量演示**（时间: 5秒）
  - 变量定义："设a=dp[i-2], b=dp[i-1], c=dp[i]"
  - 变量容器：显示三个变量容器，初始值a=1, b=1, c=?
  - 更新动画：
    * 计算c = a + b的动画，c容器填入结果
    * 变量滚动：a→b→c→a的循环更新
    * 每次迭代后变量值的变化
  - 优化效果："使用常数空间完成了原本需要线性空间的计算"

### 步骤9：复杂度分析
- **时间复杂度**（时间: 4秒）
  - 文字说明："算法从1遍历到n，执行了n次计算，时间复杂度为O(n)"
  - 图示：时间复杂度的线性增长曲线
  - 操作计数：显示算法执行的基本操作次数
  - 直观比较："随着n增大，计算时间线性增长"

- **空间复杂度**（时间: 4秒）
  - 文字说明："优化后只使用三个变量，空间复杂度为O(1)"
  - 对比图：原始O(n)与优化后O(1)的内存使用对比
  - 内存可视化：显示变量占用的内存块图示
  - 优势说明："无论楼梯多高，我们都只需要三个变量的空间"

### 步骤10：特殊情况说明
- **边界情况处理**（时间: 4秒）
  - n=0处理："当n=0时，我们认为已经在起点，方法数为1"
  - n=1处理："当n=1时，只能爬1阶，方法数为1"
  - 特殊说明：强调算法对这些边界情况的正确处理
  - 代码细节：展示处理边界情况的代码片段

- **大n值的处理**（时间: 3秒）
  - 溢出警告："当n很大时，结果可能超出整数范围"
  - 处理建议："可以对结果取模，或使用大数库"
  - 性能考量："大n值时考虑使用矩阵快速幂或通项公式方法"
  - 实际限制："在JavaScript中，安全整数的上限是2^53-1"

## 3. 交互式控制组件详细设计

### 3.1 步骤控制面板
- **播放/暂停按钮**：
  - 视觉设计：圆形按钮，直径40px，内嵌三角形播放图标或双竖线暂停图标
  - 位置：控制面板中央偏下位置
  - 状态：两个状态（播放/暂停），鼠标悬停时轻微放大(scale 1.05)
  - 点击效果：按下时轻微缩小(scale 0.95)，释放时恢复
  - 颜色：绿色背景(#4CAF50)，白色图标，鼠标悬停时加深(#388E3C)

- **前进/后退按钮**：
  - 视觉设计：圆形按钮，直径30px，内嵌箭头图标
  - 位置：播放按钮两侧，间距15px
  - 功能：前进/后退一步或跳到关键步骤
  - 状态：禁用状态（当无法前进/后退时）使用灰色(#BDBDBD)
  - 点击效果：同播放按钮，但幅度更小

- **速度控制滑块**：
  - 视觉设计：水平滑块，长度150px，高度6px，圆形滑块直径16px
  - 位置：控制面板底部
  - 范围标记：0.5x, 1.0x, 1.5x, 2.0x四个刻度标记
  - 默认位置：1.0x（中间偏左）
  - 视觉反馈：当前速度值在滑块上方显示，如"1.5x"
  - 交互：拖动改变速度，点击刻度直接跳转到对应速度

### 3.2 算法参数控制
- **楼梯阶数输入**：
  - 视觉设计：数字输入框 + 水平滑块组合
  - 输入框：宽度60px，右对齐，仅允许整数输入
  - 滑块：长度200px，表示0-30范围
  - 默认值：n=6
  - 更新方式：输入后点击"重新计算"按钮，或按回车键
  - 输入限制：
    * 仅允许0-30的整数
    * 超出范围时显示错误提示
    * 非法输入自动更正为最近有效值

- **重新计算按钮**：
  - 视觉设计：圆角矩形按钮，宽度100px，高度32px
  - 文字："重新计算"，14px Roboto字体
  - 位置：参数控制区域右侧
  - 状态：常规/悬停/按下/禁用四种状态
  - 点击效果：轻微下沉(2px)，释放时回弹
  - 动作：点击后使用新参数重新开始动画

### 3.3 辅助功能控制
- **解释级别选择**：
  - 视觉设计：三段式切换开关
  - 选项：简洁/详细/专家三个级别
  - 位置：控制面板右上角
  - 默认值：详细模式
  - 切换效果：滑动切换，带有200ms过渡动画
  - 功能：调整文字解释的详细程度和技术难度

- **代码/公式切换**：
  - 视觉设计：标签式切换按钮，宽度各80px，高度30px
  - 选项："代码" / "公式"
  - 位置：解释面板顶部
  - 切换效果：点击未选中标签，内容区域滑动切换(300ms)
  - 默认值：代码视图
  - 功能：切换显示代码实现或数学公式表示

以上为动态规划算法可视化详细计划的第二部分，完整详细地规划了算法的递推计算过程、结果展示和交互控制组件的设计。这些设计细节将确保用户能够清晰理解动态规划解决爬楼梯问题的完整过程。 