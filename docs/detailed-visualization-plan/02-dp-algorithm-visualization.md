# 动态规划算法可视化详细计划

## 1. 楼梯组件详细设计规范

### 1.1 楼梯基础结构
- **楼梯形状**：创建一个自适应的楼梯组件，根据输入的n值动态调整楼梯阶数
  - 当n <= 5时：显示完整楼梯，每阶高度为40px，宽度为160px
  - 当6 <= n <= 10时：楼梯高度减小至30px，宽度为140px
  - 当n > 10时：楼梯高度减小至20px，宽度为120px，并启用缩放效果
  - 当n > 20时：使用缩略视图，显示前5阶、后5阶和关键几阶，其余以省略号表示
  - 边界情况：n=0时仅显示起点平台，n=1时显示起点和一个台阶

- **台阶设计**：每个台阶采用3D立体形状
  - 台阶正面：渐变填充，从上到下颜色加深
  - 台阶顶面：亮色填充，比正面颜色亮20%
  - 台阶侧面：深色填充，比正面颜色暗20%
  - 台阶编号：左侧显示阶数数字(0~n)，字体为Roboto，大小14px，白色带黑色轮廓
  - 台阶间距：垂直间距10px，形成视觉上连续的楼梯结构
  - 光照效果：顶部添加高光，底部添加阴影，增强3D感

- **台阶状态**：
  - 未计算状态：使用#E0E0E0灰色，透明度50%，无光泽效果
  - 已计算状态：使用#81C784绿色系，透明度100%，有光泽效果
  - 当前计算状态：使用#4CAF50亮绿色，透明度100%，边缘发光效果（发光颜色#A5D6A7，宽度3px）
  - 状态转换动画：状态变化时，颜色渐变时长300ms，发光效果淡入时长200ms

### 1.2 方法数显示器
- **显示器设计**：
  - 形状：圆形计数器，直径30px，边框2px实线（颜色#616161）
  - 位置：每个台阶右上角，内边距为台阶宽度的5%
  - 背景：未计算时为浅灰色(#F5F5F5)，已计算时为浅绿色(#E8F5E9)
  - 文字：未计算显示"?"，已计算显示具体数字，字体Roboto Mono，大小16px，颜色#212121
  - 阴影：轻微的阴影效果(2px模糊，#00000033)，营造浮于台阶上方的感觉

- **数值动画**：
  - 初始状态：问号(?)，灰色背景
  - 计算进行中：问号闪烁(透明度0.5-1.0循环，周期500ms)
  - 数值更新：数字从0缓慢增加到目标值(如1→2→3)，每次变化时长100ms
  - 更新完成：短暂放大再恢复(scale 1.2→1.0，时长200ms)，同时背景颜色过渡到浅绿色
  - 大数值处理：当结果超过999时，使用科学计数法(如"1.2k")或字体自动缩小至10px

### 1.3 路径箭头
- **箭头设计**：
  - 爬1阶箭头：蓝色(#2196F3)，宽度5px，半透明度60%
  - 爬2阶箭头：橙色(#FF9800)，宽度5px，半透明度60%
  - 箭头路径：使用二次贝塞尔曲线，控制点位于两台阶中间偏上位置
  - 箭头头部：三角形，底边10px，高8px，与线条颜色相同
  - 多箭头分布：并行箭头之间间隔10px，错开放置避免视觉混乱

- **箭头标签**：
  - 形状：圆形或胶囊形标签，直径20px或宽度40px、高度20px
  - 位置：箭头中间位置略微偏上
  - 文字："爬1阶"或"爬2阶"，字体Roboto，大小10px，白色
  - 背景：与箭头相同颜色，不透明度80%
  - 箭头值标签：在箭头起点附近，显示来源台阶的方法数，设计与方法数显示器一致但尺寸更小(直径20px)

- **箭头动画**：
  - 生成动画：箭头从起点向终点生长，时长300ms，ease-out曲线
  - 数据流动画：5-8个小圆点(直径3px)沿箭头路径从起点流向终点，每个点间隔20px，移动速度每秒100px
  - 高亮动画：当前计算路径的箭头透明度增加到100%，宽度增加到7px，发光效果(原颜色，模糊3px)
  - 消失动画：计算完成后，箭头透明度逐渐降低到60%，宽度恢复到5px，时长200ms

## 2. 动态规划算法步骤详细实现 (第一部分)

### 步骤1：问题介绍与场景设置
- **场景初始化**（时间: 0-2秒）
  - 动画：空白画布中央淡入显示一个楼梯平台(起点，第0阶)，透明度0→100%
  - 文字标题：顶部显示"爬楼梯问题(LeetCode 70)"，字体大小24px，渐现效果
  - 平台放大：起点平台稍微放大(scale 1.0→1.1→1.0)，引起注意
  - 小人出现：在起点平台左侧淡入显示一个小人角色，简约风格卡通人物，高度为台阶高度的1.5倍
  
- **楼梯生成**（时间: 2-4秒）
  - 楼梯生成：从起点开始，逐个生成楼梯台阶，每个台阶生成时长为(2/n)秒，总时长不超过2秒
  - 台阶编号：每个台阶生成的同时显示编号(0~n)
  - 生成动画：台阶从下方滑入并逐渐变大到实际大小
  - 目标标识：在第n阶顶部显示一个闪烁的星星图标，表示目标位置
  - 屏幕适配：根据n值和屏幕大小，自动调整楼梯的角度和缩放比例，确保整个楼梯可见
  
- **问题描述**（时间: 4-7秒）
  - 文字弹窗：右侧或底部出现问题描述："假设你正在爬楼梯，每次可以爬1阶或2阶，求爬到第n阶有多少种不同的方法？"
  - 文字动画：使用打字机效果逐字显示问题描述，每字20ms
  - 参数标注：将文字中的"n"替换为实际输入值，并以不同颜色(#FF5722)强调
  - 小人动作：小人先原地小跳一下表示准备，然后演示爬1阶(跳到第1阶)和爬2阶(从第0阶直接跳到第2阶)的动作
  - 轨迹线：小人移动时显示运动轨迹虚线

- **初始状态标记**（时间: 7-9秒）
  - 方法数初始化：所有台阶的方法数显示器初始化为"?"，未计算状态
  - 起点特殊标注：第0阶方法数从"?"变为"1"，并高亮
  - 文字说明："在起点(第0阶)，我们认为已经有1种方法到达"
  - 数据初始化提示：显示"dp[0] = 1"的代码片段，使用打字机效果
  - 视觉引导：镜头轻微缩放并聚焦在起点区域

### 步骤2：思路分析
- **问题拆解**（时间: 9-12秒）
  - 文字气泡："要解决这个问题，我们需要思考：如何到达每一个台阶？"
  - 思考动画：小人做思考状态(头上出现思考泡泡，内含问号)
  - 问题转化："要知道到达第i阶的方法数，我们需要考虑哪些因素？"
  - 路径示意：出现虚线箭头，指向某一台阶，表示我们在分析该台阶
  - 视觉引导：该台阶编号闪烁强调(闪烁周期800ms)

- **路径来源分析**（时间: 12-16秒）
  - 文字气泡："想一想，要到达第i阶，我们可以从哪些台阶出发？"
  - 场景聚焦：镜头移动到第3阶(易于理解的示例)
  - 箭头出现：显示两条虚线箭头，分别从第1阶和第2阶指向第3阶
  - 文字说明："我们可以从第(i-1)阶爬1阶，或从第(i-2)阶爬2阶到达第i阶"
  - 小人演示：小人先站在第2阶，爬1阶到第3阶；然后回到第1阶，爬2阶到第3阶

- **方法数关系**（时间: 16-20秒）
  - 文字气泡："第i阶的方法数，等于从第(i-1)阶和第(i-2)阶到达的方法数之和"
  - 公式出现：右侧显示"dp[i] = dp[i-1] + dp[i-2]"，使用打字机效果
  - 推导解释："因为从第(i-1)阶有dp[i-1]种方法，每种都可以再爬1阶到达第i阶"
  - 继续解释："从第(i-2)阶有dp[i-2]种方法，每种都可以再爬2阶到达第i阶"
  - 总结："所以到达第i阶的总方法数是这两部分之和"

### 步骤3：动态规划原理
- **DP介绍**（时间: 20-24秒）
  - 文字说明："动态规划通过解决并存储子问题的结果，来解决整个问题"
  - 概念图解：显示一个金字塔形的依赖结构，底层是基础问题，顶层是最终问题
  - 视觉比喻：将楼梯问题与金字塔构建类比，从底层开始往上构建
  - 关键点强调："关键是找到子问题之间的联系(状态转移方程)"
  - 公式聚焦：再次强调"dp[i] = dp[i-1] + dp[i-2]"，增加高亮和放大效果

- **解决方案概述**（时间: 24-28秒）
  - 文字说明："我们将自下而上计算每一阶的方法数"
  - 方向指示：从起点开始，在楼梯上沿着上升方向显示一个箭头
  - 过程预览："先计算dp[0]，然后dp[1]，dp[2]，直到dp[n]"
  - 算法框架：右侧显示伪代码框架，使用打字机效果
  ```
  初始化: dp[0] = 1
  对于i从1到n:
    如果i=1: dp[1] = dp[0] (只能从第0阶爬1阶)
    否则: dp[i] = dp[i-1] + dp[i-2]
  返回dp[n]
  ```
  - 视觉引导：代码每行显示时，对应的楼梯部分轻微高亮

以上为动态规划算法可视化详细计划的第一部分，包含了楼梯组件的详细设计规范和算法步骤实现的前三步。后续部分将继续详细规划递推计算过程和结果展示。 